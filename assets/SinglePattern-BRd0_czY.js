import{r as c,d as C,u as L,j as e,a as F,b as M}from"./index-DBiGbhcg.js";import{s as P}from"./supabaseClient-D0YvXYgE.js";import{B as h}from"./Button-Cq6hTME8.js";import{H as I}from"./HeaderSmall-DVan3fZi.js";import{N as E}from"./Nav-CLPHs6nx.js";import{P as Q}from"./PopUp-CbZ6chGu.js";const V=({part:s})=>{const n=c.useContext(C),g=L(),p=()=>{const r=s.rows,i=[];return r.forEach(l=>{if(l.instructions)if(l.amount_of_rows===1)i.push({instructions:l.instructions});else for(let d=0;d<l.amount_of_rows;d++)i.push({instructions:l.instructions});else i.push({instructions:"Instructions missing..."})}),i},j=()=>{const r=n.headline+": "+s.headline,i=p();localStorage.setItem("currentCount","1"),localStorage.setItem("currentPiece",r),localStorage.setItem("currentRows",JSON.stringify(i)),setTimeout(()=>{g("/rowcounter")},300)};return e.jsxs("section",{className:"partPreview",children:[e.jsx("h3",{children:s.headline}),s.img?e.jsx("img",{src:s.img,alt:"part of pattern"}):e.jsx(e.Fragment,{}),e.jsx(h,{bgColor:"tetriary",onClick:j,children:e.jsxs("div",{className:"btnText",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"35px",viewBox:"0 -960 960 960",width:"35px",fill:"currentcolor",children:e.jsx("path",{d:"M316-232h53.33v-85.33h85.34v-53.34h-85.34V-456H316v85.33h-85.33v53.34H316V-232Zm210-33.33h200.67V-318H526v52.67ZM526-370h200.67v-53.33H526V-370Zm39.33-159.33 59.34-59.34L684-529.33l38-38-59.33-60L722-686.67l-38-38-59.33 59.34-59.34-59.34-38 38 59.34 59.34-59.34 60 38 38ZM244-600.67h197.33V-654H244v53.33ZM186.67-120q-27 0-46.84-19.83Q120-159.67 120-186.67v-586.66q0-27 19.83-46.84Q159.67-840 186.67-840h586.66q27 0 46.84 19.83Q840-800.33 840-773.33v586.66q0 27-19.83 46.84Q800.33-120 773.33-120H186.67Zm0-66.67h586.66v-586.66H186.67v586.66Zm0-586.66v586.66-586.66Z"})}),e.jsx("p",{children:"Start Rowcounter"})]})}),s.notes?e.jsxs("article",{children:[e.jsx("h4",{children:"Notes"}),e.jsx("p",{children:s.notes})]}):e.jsx(e.Fragment,{}),e.jsxs("article",{children:[e.jsx("h4",{children:"Instructions"}),s.rows.map((r,i)=>e.jsxs("div",{className:"rowInstructionContainer",children:[r.amount_of_rows>1?e.jsxs("p",{children:[r.row_start," - ",r.row_start+r.amount_of_rows-1,"."]}):e.jsxs("p",{children:[r.row_start,"."]}),e.jsx("p",{children:r.instructions})]},i))]})]})},W=()=>{const s=L(),n=c.useContext(C),g=c.useContext(F),[p,j]=c.useState([]),[r,i]=c.useState(!1),[l,d]=c.useState(!1),{id:u}=M(),v=localStorage.getItem("user_id");c.useEffect(()=>{const t=document.getElementById("patternView");t==null||t.classList.add("fadeOut"),setTimeout(()=>{t==null||t.classList.remove("fadeOut"),t==null||t.classList.add("fadeIn")},100),v&&u&&(async(w,f)=>{const{data:m,error:x}=await P.from("Parts").select().eq("user_id",w).eq("pattern_id",f);if(x&&console.error(x),m){const b=m.map(a=>({part_id:a.part_id,pattern_id:a.pattern_id,headline:a.headline,img:a.img,notes:a.notes,rows:a.rows,user_id:a.user_id}));j(b)}})(v,u)},[]);const q=()=>{const t={headline:n.headline,notes:n.notes,img:n.img,pattern_id:n.pattern_id,type:n.type,parts:p};g({type:"UPDATE",payload:t}),setTimeout(()=>{s("/patternForm/false")},300)},y=()=>{v&&u&&(async(w,f)=>{const{data:m,error:x}=await P.from("Patterns").delete().eq("user_id",w).eq("pattern_id",f);x&&console.error(x),m&&console.log(m)})(v,u);const o=document.getElementById("popup");o==null||o.classList.add("fadeOut"),d(!1),i(!0)},H=()=>{const t=document.querySelector("section");t==null||t.classList.add("blur"),d(!0)},_=()=>{const t=document.querySelector("section");t==null||t.classList.remove("blur");const o=document.getElementById("popup");o==null||o.classList.add("fadeOut"),setTimeout(()=>{d(!1)},300)},N=()=>{const t=document.querySelector("section");t==null||t.classList.remove("blur");const o=document.getElementById("popup");o==null||o.classList.add("fadeOut"),setTimeout(()=>{i(!1)},300),Z()},Z=()=>{setTimeout(()=>{s("/patterns")},300)},T=()=>{setTimeout(()=>{s("/")},300)},B=()=>{setTimeout(()=>{s("/settings")},300)},S=[{onClick:T,children:e.jsxs("div",{className:"navBtnText",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"35px",viewBox:"0 -960 960 960",width:"35px",fill:"currentcolor",children:e.jsx("path",{d:"M226.67-186.67h140v-246.66h226.66v246.66h140v-380L480-756.67l-253.33 190v380ZM160-120v-480l320-240 320 240v480H526.67v-246.67h-93.34V-120H160Zm320-352Z"})}),e.jsx("p",{children:"Home"})]})},{onClick:Z,children:e.jsxs("div",{className:"navBtnText",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"35px",viewBox:"0 -960 960 960",width:"35px",fill:"currentcolor",children:e.jsx("path",{d:"M293.33-80q-55.23 0-94.28-39.05Q160-158.1 160-213.33v-533.34q0-55.23 39.05-94.28Q238.1-880 293.33-880H800v600q-25.67 0-42.83 19.83Q740-240.33 740-213.33q0 27 17.17 46.83 17.16 19.83 42.83 19.83V-80H293.33Zm-66.66-249q14.66-9 31.33-13.33 16.67-4.34 35.33-4.34H320v-466.66h-26.67q-27.77 0-47.22 19.44-19.44 19.45-19.44 47.22V-329Zm160-17.67h346.66v-466.66H386.67v466.66Zm-160 17.67v-484.33V-329Zm66.36 182.33h397.3q-8-14.66-12.5-31.5-4.5-16.83-4.5-35.16 0-18.67 4.34-35.34Q682-265.33 691-280H293.07q-27.74 0-47.07 19.44-19.33 19.45-19.33 47.23 0 28 19.33 47.33t47.03 19.33Z"})}),e.jsx("p",{children:"Patterns"})]})},{onClick:B,children:e.jsxs("div",{className:"navBtnText",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"35px",viewBox:"0 -960 960 960",width:"35px",fill:"currentcolor",children:e.jsx("path",{d:"m382-80-18.67-126.67q-17-6.33-34.83-16.66-17.83-10.34-32.17-21.67L178-192.33 79.33-365l106.34-78.67q-1.67-8.33-2-18.16-.34-9.84-.34-18.17 0-8.33.34-18.17.33-9.83 2-18.16L79.33-595 178-767.67 296.33-715q14.34-11.33 32.34-21.67 18-10.33 34.66-16L382-880h196l18.67 126.67q17 6.33 35.16 16.33 18.17 10 31.84 22L782-767.67 880.67-595l-106.34 77.33q1.67 9 2 18.84.34 9.83.34 18.83 0 9-.34 18.5Q776-452 774-443l106.33 78-98.66 172.67-118-52.67q-14.34 11.33-32 22-17.67 10.67-35 16.33L578-80H382Zm55.33-66.67h85l14-110q32.34-8 60.84-24.5T649-321l103.67 44.33 39.66-70.66L701-415q4.33-16 6.67-32.17Q710-463.33 710-480q0-16.67-2-32.83-2-16.17-7-32.17l91.33-67.67-39.66-70.66L649-638.67q-22.67-25-50.83-41.83-28.17-16.83-61.84-22.83l-13.66-110h-85l-14 110q-33 7.33-61.5 23.83T311-639l-103.67-44.33-39.66 70.66L259-545.33Q254.67-529 252.33-513 250-497 250-480q0 16.67 2.33 32.67 2.34 16 6.67 32.33l-91.33 67.67 39.66 70.66L311-321.33q23.33 23.66 51.83 40.16 28.5 16.5 60.84 24.5l13.66 110Zm43.34-200q55.33 0 94.33-39T614-480q0-55.33-39-94.33t-94.33-39q-55.67 0-94.5 39-38.84 39-38.84 94.33t38.84 94.33q38.83 39 94.5 39ZM480-480Z"})}),e.jsx("p",{children:"Settings"})]})}];return e.jsxs(e.Fragment,{children:[l?e.jsx("div",{className:"overlay",children:e.jsxs("div",{className:"popup",children:[e.jsx("div",{children:e.jsx("p",{children:e.jsx("span",{children:"Are you sure you wish to delete this pattern?"})})}),e.jsxs("div",{className:"primaryBtnContainer",children:[e.jsx(h,{bgColor:"return",onClick:y,children:e.jsx(e.Fragment,{children:"Yes, delete it."})}),e.jsx(h,{bgColor:"primary",onClick:_,children:e.jsx(e.Fragment,{children:"No, I changed my mind."})})]})]})}):e.jsx(e.Fragment,{}),r?e.jsx(Q,{message:e.jsx("h3",{children:"You have successfully deleted the pattern!"}),onClose:N}):e.jsx(e.Fragment,{}),e.jsx(I,{bgColor:"tetriary"}),e.jsxs("section",{className:"patternView",id:"patternView",children:[n.img?e.jsx("img",{src:n.img,alt:"main pattern image"}):e.jsx(e.Fragment,{}),e.jsx("h2",{children:n.headline}),e.jsx(h,{bgColor:"secondary",onClick:q,children:e.jsxs("div",{className:"btnText",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"35px",viewBox:"0 -960 960 960",width:"35px",fill:"currentcolor",children:e.jsx("path",{d:"M186.67-186.67H235L680-631l-48.33-48.33-445 444.33v48.33ZM120-120v-142l559.33-558.33q9.34-9 21.5-14 12.17-5 25.5-5 12.67 0 25 5 12.34 5 22 14.33L821-772q10 9.67 14.5 22t4.5 24.67q0 12.66-4.83 25.16-4.84 12.5-14.17 21.84L262-120H120Zm652.67-606-46-46 46 46Zm-117 71-24-24.33L680-631l-24.33-24Z"})}),e.jsx("p",{children:"Edit Pattern"})]})}),n.notes?e.jsxs("article",{className:"patternNotes",children:[e.jsx("h4",{children:"Notes"}),e.jsx("p",{children:n.notes})]}):e.jsx(e.Fragment,{}),p.map(t=>e.jsx(V,{part:t},t.part_id)),e.jsxs("div",{className:"primaryBtnContainer",children:[e.jsx(h,{bgColor:"secondary",onClick:q,children:e.jsxs("div",{className:"btnText",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"35px",viewBox:"0 -960 960 960",width:"35px",fill:"currentcolor",children:e.jsx("path",{d:"M186.67-186.67H235L680-631l-48.33-48.33-445 444.33v48.33ZM120-120v-142l559.33-558.33q9.34-9 21.5-14 12.17-5 25.5-5 12.67 0 25 5 12.34 5 22 14.33L821-772q10 9.67 14.5 22t4.5 24.67q0 12.66-4.83 25.16-4.84 12.5-14.17 21.84L262-120H120Zm652.67-606-46-46 46 46Zm-117 71-24-24.33L680-631l-24.33-24Z"})}),e.jsx("p",{children:"Edit Pattern"})]})}),e.jsx(h,{bgColor:"return",onClick:H,children:e.jsxs("div",{className:"btnText",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"35px",viewBox:"0 -960 960 960",width:"35px",fill:"#currentcollor",children:e.jsx("path",{d:"M267.33-120q-27.5 0-47.08-19.58-19.58-19.59-19.58-47.09V-740H160v-66.67h192V-840h256v33.33h192V-740h-40.67v553.33q0 27-19.83 46.84Q719.67-120 692.67-120H267.33Zm425.34-620H267.33v553.33h425.34V-740Zm-328 469.33h66.66v-386h-66.66v386Zm164 0h66.66v-386h-66.66v386ZM267.33-740v553.33V-740Z"})}),e.jsx("p",{children:"Delete Pattern"})]})})]})]}),e.jsx(E,{bgColor:"tetriary",buttons:S})]})};export{W as SinglePattern};
